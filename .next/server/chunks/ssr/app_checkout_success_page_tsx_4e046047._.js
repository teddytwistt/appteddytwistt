module.exports=[60120,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(97895);function j({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var k=a.i(87682);let l=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var m=a.i(96221),n=a.i(62722),o=a.i(92e3);let p=(0,a.i(187).cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function q({className:a,variant:c,...d}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(p({variant:c}),a),...d})}function r({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}let s=[{nombre:"Buenos Aires",localidades:["La Plata","Mar del Plata","Bahía Blanca","Tandil","Olavarría","Junín","Pergamino","Azul","Necochea","San Nicolás","Chivilcoy","Mercedes","Luján","San Pedro","Zárate","Campana","Morón","San Isidro","Vicente López","Lomas de Zamora","Quilmes","Avellaneda","Lanús","San Martín","Tres de Febrero","La Matanza","Pilar","Tigre","Escobar","San Fernando"]},{nombre:"Catamarca",localidades:["San Fernando del Valle de Catamarca","Andalgalá","Belén","Santa María","Tinogasta","Recreo","Fray Mamerto Esquiú","Valle Viejo"]},{nombre:"Chaco",localidades:["Resistencia","Presidencia Roque Sáenz Peña","Villa Ángela","Charata","General José de San Martín","Quitilipi","Las Breñas","Fontana","Barranqueras","Castelli"]},{nombre:"Chubut",localidades:["Rawson","Comodoro Rivadavia","Trelew","Puerto Madryn","Esquel","Sarmiento","Puerto Deseado","Gaiman","Dolavon"]},{nombre:"Córdoba",localidades:["Córdoba","Río Cuarto","Villa Carlos Paz","Villa María","San Francisco","Alta Gracia","Bell Ville","Jesús María","La Falda","Cosquín","Cruz del Eje","Laboulaye","Villa Dolores","Marcos Juárez","Río Tercero","Arroyito","Villa Allende","La Calera","Unquillo","Carlos Paz"]},{nombre:"Corrientes",localidades:["Corrientes","Goya","Paso de los Libres","Curuzú Cuatiá","Mercedes","Santo Tomé","Esquina","Bella Vista","Monte Caseros","Sauce"]},{nombre:"Entre Ríos",localidades:["Paraná","Concordia","Gualeguaychú","Concepción del Uruguay","Gualeguay","Victoria","Villaguay","Chajarí","Federación","Colón"]},{nombre:"Formosa",localidades:["Formosa","Clorinda","Pirané","El Colorado","Ibarreta","Las Lomitas","Ingeniero Juárez","Comandante Fontana"]},{nombre:"Jujuy",localidades:["San Salvador de Jujuy","San Pedro","Libertador General San Martín","Palpalá","La Quiaca","Humahuaca","Tilcara","Perico","El Carmen"]},{nombre:"La Pampa",localidades:["Santa Rosa","General Pico","Toay","Eduardo Castex","Realicó","Macachín","Victorica","General Acha","Intendente Alvear"]},{nombre:"La Rioja",localidades:["La Rioja","Chilecito","Aimogasta","Chamical","Villa Unión","Chepes","Nonogasta","Vinchina"]},{nombre:"Mendoza",localidades:["Mendoza","San Rafael","Godoy Cruz","Guaymallén","Luján de Cuyo","Maipú","Las Heras","San Martín","Rivadavia","Tunuyán","Tupungato","Malargüe","General Alvear","Junín"]},{nombre:"Misiones",localidades:["Posadas","Oberá","Eldorado","Puerto Iguazú","Apóstoles","Leandro N. Alem","Puerto Rico","Montecarlo","Jardín América","Wanda"]},{nombre:"Neuquén",localidades:["Neuquén","San Martín de los Andes","Zapala","Cutral Có","Centenario","Plottier","Junín de los Andes","Villa La Angostura","Chos Malal"]},{nombre:"Río Negro",localidades:["Viedma","San Carlos de Bariloche","General Roca","Cipolletti","Villa Regina","Cinco Saltos","Catriel","El Bolsón","Allen","Choele Choel"]},{nombre:"Salta",localidades:["Salta","San Ramón de la Nueva Orán","Tartagal","Metán","Cafayate","Rosario de la Frontera","Joaquín V. González","Embarcación","General Güemes"]},{nombre:"San Juan",localidades:["San Juan","Pocito","Rawson","Chimbas","Santa Lucía","Rivadavia","Caucete","Albardón","9 de Julio","Jáchal"]},{nombre:"San Luis",localidades:["San Luis","Villa Mercedes","La Punta","Merlo","Justo Daract","Tilisarao","Villa de la Quebrada","Concarán"]},{nombre:"Santa Cruz",localidades:["Río Gallegos","Caleta Olivia","Pico Truncado","Puerto Deseado","Puerto San Julián","El Calafate","28 de Noviembre","Las Heras"]},{nombre:"Santa Fe",localidades:["Santa Fe","Rosario","Rafaela","Venado Tuerto","Reconquista","Villa Constitución","Casilda","Esperanza","San Lorenzo","Gálvez","Cañada de Gómez","Firmat","Totoras","Funes","Pérez"]},{nombre:"Santiago del Estero",localidades:["Santiago del Estero","La Banda","Termas de Río Hondo","Frías","Añatuya","Monte Quemado","Fernández","Suncho Corral"]},{nombre:"Tierra del Fuego",localidades:["Ushuaia","Río Grande","Tolhuin"]},{nombre:"Tucumán",localidades:["San Miguel de Tucumán","San Pedro de Colalao","Concepción","Tafí Viejo","Yerba Buena","Aguilares","Famaillá","Monteros","Banda del Río Salí"]}];function t(){let a=(0,d.useSearchParams)(),i=(0,d.useRouter)(),[p,t]=(0,c.useState)("loading"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({nombre_apellido:"",email:"",telefono:"",dni:"",provincia:"",ciudad:"",direccion_completa:"",comentarios:""}),[G,H]=(0,c.useState)([]);(0,c.useEffect)(()=>{w?.zona==="cba"&&F(a=>({...a,provincia:"Córdoba",ciudad:"Córdoba"}))},[w?.zona]),(0,c.useEffect)(()=>{(async()=>{let b=a.get("payment_id"),c=a.get("preference_id");if(!b||!c){t("error"),v("Faltan parámetros de pago");return}try{let a=await fetch(`/api/payment/validate?payment_id=${b}&preference_id=${c}`),d=await a.json();d.success?(t("success"),v(d.message),x({...d.pedido,payment_id:b})):(t("error"),v(d.message||"El pago no pudo ser validado"))}catch(a){console.error("[v0] Validation error:",a),t("error"),v("Error al validar el pago")}})()},[a]);let I=async a=>{a.preventDefault(),z(!0),B(null);try{let a=await fetch("/api/shipping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_id:w.payment_id,...E})}),b=await a.json();if(!a.ok)throw Error(b.error||"Error al enviar el formulario");D(!0)}catch(a){console.error("[v0] Form submission error:",a),B(a instanceof Error?a.message:"Error al enviar el formulario")}finally{z(!1)}},J=(a,b)=>{if(F(c=>({...c,[a]:b})),"provincia"===a){let a;H((a=s.find(a=>a.nombre===b))?a.localidades:[]),F(a=>({...a,ciudad:""}))}};return"loading"===p?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background",children:(0,b.jsx)(e.Card,{className:"w-full max-w-md",children:(0,b.jsxs)(e.CardContent,{className:"pt-6 flex flex-col items-center gap-4",children:[(0,b.jsx)(m.Loader2,{className:"w-12 h-12 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Validando tu pago..."}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Por favor espera mientras verificamos tu compra"})]})})}):"error"===p?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(n.XCircle,{className:"w-16 h-16 text-red-500"})}),(0,b.jsx)(e.CardTitle,{className:"text-center text-2xl",children:"Error en el pago"}),(0,b.jsx)(e.CardDescription,{className:"text-center",children:u})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(f.Button,{onClick:()=>i.push("/"),className:"w-full",children:"Volver al inicio"})})]})}):C?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(l,{className:"w-16 h-16 text-green-500"})}),(0,b.jsx)(e.CardTitle,{className:"text-center text-2xl",children:"¡Compra completada!"}),(0,b.jsx)(e.CardDescription,{className:"text-center",children:"Tu pedido ha sido registrado exitosamente. Recibirás un correo con los detalles de tu compra."})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Número de orden:"}),(0,b.jsxs)("p",{className:"text-lg font-mono",children:["#",w.id]})]}),w.numero_serie&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Número de serie:"}),(0,b.jsxs)("p",{className:"text-lg font-mono",children:[String(w.numero_serie).padStart(3,"0"),"/900"]})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Recibirás tu Buzzy Twist en 3-5 días hábiles. ¡Gracias por tu compra!"}),(0,b.jsx)(f.Button,{onClick:()=>i.push("/"),className:"w-full",children:"Volver al inicio"})]})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background py-12",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-2xl",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(l,{className:"w-16 h-16 text-green-500"})}),(0,b.jsx)(e.CardTitle,{className:"text-center text-2xl",children:"¡Pago aprobado!"}),(0,b.jsx)(e.CardDescription,{className:"text-center",children:"Completa tus datos de envío para recibir tu Buzzy Twist"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)(q,{className:"mb-6 bg-primary/10 border-primary/20",children:[(0,b.jsx)(o.AlertCircle,{className:"h-4 w-4"}),(0,b.jsxs)(r,{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Zona:"})," ",w?.zona==="cba"?"Córdoba Capital - Envío gratuito":"Resto del país - Envío incluido",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"font-semibold",children:"Monto pagado:"})," $",w?.monto_final?.toLocaleString("es-AR")]})]}),(0,b.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"nombre_apellido",children:"Nombre y apellido *"}),(0,b.jsx)(g.Input,{id:"nombre_apellido",required:!0,value:E.nombre_apellido,onChange:a=>J("nombre_apellido",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"email",children:"Email *"}),(0,b.jsx)(g.Input,{id:"email",type:"email",required:!0,value:E.email,onChange:a=>J("email",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"telefono",children:"Teléfono / WhatsApp *"}),(0,b.jsx)(g.Input,{id:"telefono",type:"tel",required:!0,value:E.telefono,onChange:a=>J("telefono",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"dni",children:"DNI *"}),(0,b.jsx)(g.Input,{id:"dni",required:!0,value:E.dni,onChange:a=>J("dni",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"provincia",children:"Provincia *"}),w?.zona==="cba"?(0,b.jsx)(g.Input,{id:"provincia",required:!0,value:"Córdoba",disabled:!0,className:"bg-muted"}):(0,b.jsxs)(k.Select,{value:E.provincia,onValueChange:a=>J("provincia",a),required:!0,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecciona tu provincia"})}),(0,b.jsx)(k.SelectContent,{children:s.map(a=>a.nombre).map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"ciudad",children:"Ciudad / Localidad *"}),w?.zona==="cba"?(0,b.jsx)(g.Input,{id:"ciudad",required:!0,value:"Córdoba",disabled:!0,className:"bg-muted"}):(0,b.jsxs)(k.Select,{value:E.ciudad,onValueChange:a=>J("ciudad",a),required:!0,disabled:!E.provincia,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:E.provincia?"Selecciona tu localidad":"Primero selecciona provincia"})}),(0,b.jsx)(k.SelectContent,{children:G.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"direccion_completa",children:"Dirección completa (calle, número, piso/depto, código postal) *"}),(0,b.jsx)(g.Input,{id:"direccion_completa",required:!0,value:E.direccion_completa,onChange:a=>J("direccion_completa",a.target.value),placeholder:"Ej: Av. Colón 1234, Piso 5 Dto A, CP 5000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"comentarios",children:"Comentarios / notas de entrega (opcional)"}),(0,b.jsx)(j,{id:"comentarios",value:E.comentarios,onChange:a=>J("comentarios",a.target.value),placeholder:"Información adicional sobre la entrega...",rows:3})]}),A&&(0,b.jsxs)(q,{variant:"destructive",children:[(0,b.jsx)(o.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(r,{children:A})]}),(0,b.jsx)(f.Button,{type:"submit",className:"w-full",size:"lg",disabled:y,children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):"Confirmar datos de envío"})]})]})]})})}function u(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background",children:(0,b.jsx)(e.Card,{className:"w-full max-w-md",children:(0,b.jsxs)(e.CardContent,{className:"pt-6 flex flex-col items-center gap-4",children:[(0,b.jsx)(m.Loader2,{className:"w-12 h-12 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Cargando..."})]})})}),children:(0,b.jsx)(t,{})})}a.s(["default",()=>u],60120)}];

//# sourceMappingURL=app_checkout_success_page_tsx_4e046047._.js.map