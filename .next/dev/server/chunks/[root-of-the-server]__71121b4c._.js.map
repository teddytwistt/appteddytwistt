{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/fausti/Downloads/teddyTwist/nuevos-cambios-gonzalo/lib/supabase/server-admin.ts"],"sourcesContent":["import { createClient as createSupabaseClient } from \"@supabase/supabase-js\"\n\n// Server-side admin client that bypasses RLS policies\n// Use this ONLY for trusted server-side operations\nexport async function createAdminClient() {\n  const supabaseUrl = process.env.SUPABASE_URL\n  const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n  if (!supabaseUrl || !supabaseServiceKey) {\n    throw new Error(\"Missing Supabase environment variables for admin client\")\n  }\n\n  return createSupabaseClient(supabaseUrl, supabaseServiceKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;;AAIO,eAAe;IACpB,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;IAC5C,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;IAEhE,IAAI,CAAC,eAAe,CAAC,oBAAoB;QACvC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAA,yLAAoB,EAAC,aAAa,oBAAoB;QAC3D,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AACF"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/fausti/Downloads/teddyTwist/nuevos-cambios-gonzalo/app/api/admin/orders/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { createAdminClient } from \"@/lib/supabase/server-admin\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const searchParams = request.nextUrl.searchParams\n    const estadoPago = searchParams.get(\"estado_pago\")\n    const estadoEnvio = searchParams.get(\"estado_envio\")\n\n    const supabase = await createAdminClient()\n\n    let query = supabase\n      .from(\"pedidos\")\n      .select(\n        `\n        *,\n        cliente:clientes(*),\n        producto:productos(*),\n        unidad:unidades_producto(*),\n        codigo_descuento:codigos_descuento(*)\n      `\n      )\n      .order(\"fecha_creacion\", { ascending: false })\n\n    // Apply filters\n    if (estadoPago) {\n      query = query.eq(\"estado_pago\", estadoPago)\n    }\n\n    if (estadoEnvio) {\n      query = query.eq(\"estado_envio\", estadoEnvio)\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      console.error(\"[admin-orders] Error fetching orders:\", error)\n      return NextResponse.json({ error: \"Error al obtener pedidos\" }, { status: 500 })\n    }\n\n    return NextResponse.json({ orders: data || [] })\n  } catch (error) {\n    console.error(\"[admin-orders] Admin orders error:\", error)\n    return NextResponse.json({ error: \"Error al obtener pedidos\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,aAAa,aAAa,GAAG,CAAC;QACpC,MAAM,cAAc,aAAa,GAAG,CAAC;QAErC,MAAM,WAAW,MAAM,IAAA,yJAAiB;QAExC,IAAI,QAAQ,SACT,IAAI,CAAC,WACL,MAAM,CACL,CAAC;;;;;;MAMH,CAAC,EAEA,KAAK,CAAC,kBAAkB;YAAE,WAAW;QAAM;QAE9C,gBAAgB;QAChB,IAAI,YAAY;YACd,QAAQ,MAAM,EAAE,CAAC,eAAe;QAClC;QAEA,IAAI,aAAa;YACf,QAAQ,MAAM,EAAE,CAAC,gBAAgB;QACnC;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;QAE9B,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,yCAAyC;YACvD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2B,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ,QAAQ,EAAE;QAAC;IAChD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF"}}]
}